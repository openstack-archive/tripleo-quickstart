.. _feature-configuration:

Feature Configuration
=====================

One can configure the Openstack features installed on either the undercloud
or overcloud by placing variable definitions in a YAML file and passing that
to quickstart using the ``-c`` command line option, like this::

    quickstart.sh -c config/general_config/featureset001.yml

Each feature set can also deploy a customized list of Openstack services. These
services are defined by the tripleo-heat-templates used for the overcloud deployment.
A definition of the services can be found
`here <https://github.com/openstack/tripleo-heat-templates/blob/master/README.rst#service-testing-matrix>`_

Below is a table with various features listed in each row and the features enabled
in each feature set configuration file in each column. When adding new configurations
please consult the following `etherpad <https://etherpad.openstack.org/p/quickstart-featuresets>`_

This matrix is automatically generated by `fs-matrix.py` script.
Follow `Updating Feature Configuration`_ to update the featureset configuration matrix.


.. include:: feature-configuration-generated.rst

Notes and known limitations:

- Featureset011, Featureset004:
   - deprecated in favor of standalone jobs
   - will most likely fail if used with recent release
- Featureset037, Overcloud Update:
   - this doesn't change the container image file.

.. _MatrixUpdate:

Updating Feature Configuration
==============================

The feature configuration matrix is automatically generated by the script fs-matrix.py.
The script reads all yml files from config/general_config/featureset*.yml and creates
an rst formatted output. Whenever an existing featureset file is modified or a new one
is created, the feature configuration matrix must be refreshed.

In order to update the featureset matrix, run::

    tox -e docs

By running this, tox calls fs-matrix.py and redirects output to
doc/source/feature-configuration-generated.rst, which in turn, is included by
doc/source/feature-configuration.rst.

.. warning::
   DO NOT MODIFY doc/source/feature-configuration-generated.rst manually.
